<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>SecureUSB ‚Äî Safe Access</title>
<style>
/* Black background with hacker image on the right */
body{
    font-family: 'JetBrains Mono', 'Courier New', monospace;
    margin:0;
    padding:0;
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-start;
    background-color:#000;
    color:#0f0;
    background-image: url('background.png');
    background-repeat: no-repeat;
    background-position: right bottom; /* Ÿäÿ∏Ÿáÿ± ÿßŸÑÿ¥ÿÆÿµ ÿπŸÑŸâ ÿßŸÑŸäŸÖŸäŸÜ */
    background-size: contain;
    letter-spacing: 0.02em;
    transition: background 0.4s;
}

/* Headings */
h1{
    font-size:32px;
    margin:28px 0 18px 0;
    color: #00ff62;
    text-shadow: 0 0 18px #00ff13, 0 0 32px #15ff00;
    font-family: 'JetBrains Mono', 'Courier New', monospace;
    letter-spacing: 0.04em;
    font-weight: 700;
    background: linear-gradient(90deg, #00ff62 60%, #0f0 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* Control cards */
.card{
    background: rgba(10,20,10,0.92);
    border: 1.5px solid #0f0;
    border-left: 6px solid #00ff13;
    border-radius:14px;
    padding:28px 22px 22px 22px;
    margin-bottom:28px;
    width:92%;
    max-width:420px;
    box-shadow: 0 0 32px #0f044, 0 0 4px #0f0;
    transform: translateY(-24px);
    opacity:0;
    animation: slideUp 1.1s cubic-bezier(.23,1.02,.58,.99) forwards;
    backdrop-filter: blur(2px);
}

/* Fields and buttons */
input, button{
    font-family: 'JetBrains Mono', 'Courier New', monospace;
    padding:14px 4px 14px 14px;
    margin-top:12px;
    width:100%;
    border-radius:10px;
    border:1.5px solid #0f0;
    background: rgba(0,0,0,0.82);
    color:#0f0;
    font-size:17px;
    box-sizing: border-box;
    transition: background 0.2s, border 0.2s, box-shadow 0.2s;
}

input[type="text"],
input[type="password"] {
    padding-right: 4px;
    padding-left: 14px;
    padding-top: 14px;
    padding-bottom: 14px;
    width: 100%;
    box-sizing: border-box;
    font-size: 17px;
    background: rgba(0,0,0,0.88);
    border: 1.5px solid #0f0;
    margin-bottom: 8px;
    outline: none;
}

input:focus{
    background: rgba(0,0,0,0.97);
    border: 1.5px solid #00ff62;
    box-shadow: 0 0 8px #00ff62;
}

button{
    background: linear-gradient(90deg,#00ff62 60%,#0f0 100%);
    color:#000;
    font-weight:700;
    cursor:pointer;
    margin-top: 14px;
    border: none;
    box-shadow: 0 0 8px #0f044;
    letter-spacing: 0.04em;
    transition: transform 0.18s, box-shadow 0.18s, background 0.18s;
}

button:hover, button:focus{
    transform: scale(1.045);
    box-shadow: 0 0 18px #00ff62, 0 0 18px #0f0;
    background: linear-gradient(90deg,#0f0 60%,#00ff62 100%);
}

/* File list */
#fileList button{
    margin-top:8px;
    background: linear-gradient(90deg,#0f0 60%,#00ff62 100%);
    color:#000;
    font-weight: 700;
    font-size: 16px;
    border: none;
    box-shadow: 0 0 8px #0f044;
}

#fileList button:hover{
    box-shadow: 0 0 16px #0f0,0 0 16px #00ff62;
    transform: scale(1.045);
    background: linear-gradient(90deg,#00ff62 60%,#0f0 100%);
}

/* Activity log */
pre{
    background: rgba(0,0,0,0.7);
    padding:12px;
    border-radius:10px;
    max-height:170px;
    overflow:auto;
    font-size:15px;
    color:#0f0;
    border: 1.5px solid #0f0;
    font-family: 'JetBrains Mono', 'Courier New', monospace;
    margin-top: 10px;
    margin-bottom: 0;
}

/* Entry animations */
@keyframes slideUp{
    to {transform: translateY(0); opacity:1;}
}

/* Responsive adjustments */
@media (max-width: 600px) {
  body {
    background-size: cover;
    background-position: center bottom;
    padding: 0 2vw;
  }
  .card {
    width: 100%;
    max-width: 100%;
    padding: 14px 6px 12px 6px;
    margin-bottom: 18px;
    box-sizing: border-box;
  }
  h1 {
    font-size: 20px;
    margin: 14px 0;
    word-break: break-word;
    text-align: center;
  }
  input, button {
    font-size: 15px;
    padding: 10px 4px 10px 10px;
  }
  pre {
    font-size: 12px;
    padding: 7px;
    max-height: 100px;
  }
}

@media (max-width: 400px) {
  h1 {
    font-size: 16px;
  }
  .card {
    padding: 8px 2px 8px 2px;
  }
  input, button {
    font-size: 13px;
    padding: 8px 2px 8px 8px;
  }
}
</style>
</head>
<body>

<h1>üîí SecureUSB ‚Äî By El Maadi 2025</h1>

<div id="loginScreen" class="card">
  <label>Username</label>
  <input id="username" type="text" placeholder="Enter username"/>
  <label>Password</label>
  <input id="password" type="password" placeholder="Enter password"/>
  <button id="loginBtn">Login</button>
  <pre id="loginLog"></pre>
</div>

<div id="fileScreen" style="display:none;">
  <div class="card">
    <label>Encrypted files password</label>
    <input id="filePwd" type="password" placeholder="Enter files password"/>
  </div>

  <div class="card">
    <h3>Encrypted files on USB</h3>
    <div id="fileList"></div>
  </div>

  <div class="card">
    <h3>Activity Log</h3>
    <pre id="log">Ready.</pre>
  </div>
</div>

<script>
(async ()=>{
const loginLog = document.getElementById('loginLog');
const logEl = document.getElementById('log');
function log(s){ logEl.textContent = new Date().toISOString() + " ‚Äî " + s + "\n" + logEl.textContent; }
function loginLogMsg(s){ loginLog.textContent = s; }

// Sounds
const soundEncrypt = new Audio('sounds/encrypt.mp3');
const soundDecrypt = new Audio('sounds/decrypt.mp3');
const soundError = new Audio('sounds/error.mp3');

// correct hash for login
const correctHash = "401edffe6c03b2bb21cd75fb4916e8a747587be0f5dd03c6b3edb6487c9faac7";

// SHA-256
async function sha256Hex(str){
  const buf = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(str));
  return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');
}

// derive AES key
async function deriveKey(password, salt){
  const enc = new TextEncoder();
  const passKey = await crypto.subtle.importKey('raw', enc.encode(password), {name:'PBKDF2'}, false, ['deriveKey']);
  const key = await crypto.subtle.deriveKey(
    {name:'PBKDF2', salt: salt, iterations: 150000, hash: 'SHA-256'},
    passKey,
    { name: 'AES-CBC', length: 256},
    false,
    ['encrypt','decrypt']
  );
  return key;
}

function concatBuffers(a,b){ let c=new Uint8Array(a.byteLength+b.byteLength); c.set(new Uint8Array(a),0); c.set(new Uint8Array(b),a.byteLength); return c.buffer; }

function downloadBlob(blob, filename){
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  a.remove();
  URL.revokeObjectURL(url);
}

async function decryptFile(file, password){
  log("Starting decryption: " + file.name);
  const ab = await file.arrayBuffer();
  if(ab.byteLength < 32){ log("File is too small"); soundError.play(); return; }
  const salt = ab.slice(0,16);
  const iv = ab.slice(16,32);
  const ct = ab.slice(32);
  const key = await deriveKey(password, salt);
  try{
    const pt = await crypto.subtle.decrypt({name:'AES-CBC', iv: iv}, key, ct);
    const blob = new Blob([pt], {type:'application/octet-stream'});
    let name = file.name;
    if(name.endsWith('.enc')) name = name.slice(0,-4);
    else name = "decrypted_"+name;
    log("Decryption complete -> Download: " + name);
    soundDecrypt.play();
    downloadBlob(blob, name);
  }catch(e){
    log("Decryption failed: " + (e.message || e));
    soundError.play();
  }
}

document.getElementById('loginBtn').addEventListener('click', async ()=>{
  const user = document.getElementById('username').value.trim();
  const pass = document.getElementById('password').value.trim();
  const hash = await sha256Hex(user + pass);
  if(hash === correctHash){
    loginLogMsg("Login successful ‚úÖ");
    document.getElementById('loginScreen').style.display = "none";
    document.getElementById('fileScreen').style.display = "block";
    soundEncrypt.play();

    const fileListDiv = document.getElementById('fileList');
    ["file1.enc","file2.enc"].forEach(fname=>{
      const btn = document.createElement('button');
      btn.textContent = fname;
      btn.onclick = ()=>{
        const input = document.createElement('input');
        input.type = "file";
        input.accept = fname;
        input.onchange = ()=>decryptFile(input.files[0], document.getElementById('filePwd').value);
        input.click();
      };
      fileListDiv.appendChild(btn);
    });

  } else {
    loginLogMsg("Incorrect username or password ‚ùå");
    soundError.play();
  }
});
})();
</script>
</body>
</html>